---
title: 【ES6】Iterator
date: 2018-11-18 12:00:00
categories:
  - 技术篇
tags:
  - 前端
  - JavaScript
  - ES6
---

1. 遍历器是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只要部署 `Iterator` 接口，就可以完成遍历操作（即依次处理该数据结构的所有成员）。
2. `Iterator` 的三个作用：<br>
    (1)为各种数据结构提供统一的访问接口。<br>
    (2)使数据结构的成员能够按照某种次序排列。<br>
    (3)供 `for…of` 消费。<br>

3. 遍历器对象本质上，就是一个指针对象。
4. 由于 `Iterator` 只是把接口规格加到数据结构之上，所以，遍历器与它所遍历的那个数据结构，实际上是分开的，完全可以写出没有对应数据结构的遍历器对象，或者说用遍历器对象模拟出数据结构。
5. 一种数据结构只要部署了 `Iterator` 接口，我们就称这种数据结构是“可遍历的”（iterable）。
6. 对于类似数组的对象（存在数值键名和 `length` 属性），部署 `Iterator` 接口，有一个简便方法，就是 `Symbol.iterator` 方法直接引用数组的 `Iterator` 接口。

7. `Iterator` 的应用场景：<br>
    (1)解构赋值：对 `数组` 和 `Set` 结构进行解构赋值时，会默认调用 `Symbol.iterator` 方法。<br>
    (2)扩展运算符：扩展运算符（`...`）也会调用默认的 `Iterator` 接口。<br>
    (3)`yield*`：`yield*` 后面跟的是一个可遍历的结构，它会调用该结构的遍历器接口。<br>
    (4)任何接受数组作为参数的场合，其实都调用了遍历器接口。`for…of`、`Array.from()`、`Map()`、 `Set()`、 `WeakMap()`、 `WeakSet()`、`Promise.all()`、`Promise.race()`。<br>

8. 可以覆盖原生的 `Symbol.iterator` 方法，达到修改遍历器行为的目的。
9. 遍历器的 `return` 方法有点像 `try - catch -finally` 中的 `finally`。
10. `for…of` 循环可以代替数组实例的 `forEach`方法。
11. `JavaScript` 原有的 `for…in` 循环，只能获得对象的键名，不能直接获取键值。ES6 提供 `for...of` 循环，允许遍历获得键值。
12. `for…of` 循环调用遍历器接口，数组的遍历器接口只返回具有数字索引的属性。这一点跟 `for…in` 循环也不一样。
13. 计算 `set` 时 返回一个值，计算 `map` 时返回一个数组，保存键和值。
14. ES6 的数组、`Set`、`Map` 都部署了 `entries()`、`keys()`、`values()` 三个方法，但是 `Set` 的后两个方法效果一模一样。
15. `for…of` 还可以用于循环字符串、`DOM NodeList` 对象、`arguments` 对象这些类似数组结构的数据。
16. 对于字符串来说，`for…of` 循环还有一个特点，就是会正确识别 `32` 位 `UTF-16` 字符。
17. `for…in` 循环主要是为遍历对象而设计的，不适用于遍历数组。因为 `for…in` 循环不仅遍历数字键名，还会遍历手动添加的其他键，甚至包括原型链上的键。
18. `for…of` 可以与 `break`、`continue` 和 `return` 配合使用。可以摒弃 `forEach` 了。舒服！